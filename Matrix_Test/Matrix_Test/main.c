/*
 * Matrix_Test.c
 *
 * Created: 2021-06-14 15:56:48
 * Author : Branden
 */ 


#include <avr/io.h>
#include "avr/delay.h"

#define DELAY 500
#define DIS_HEIGHT 8

static uint8_t _display[] = {
	0b11101110,
	0b10011001,
	0b10011001,
	0b11101110,
	0b10011001,
	0b10011001,
	0b11111111,
	0b00000000,
};	

static uint8_t _frames2[14][8] = {
	{
		0b00000000,
		0b00000000,
		0b10000000,
		0b01000000,	
		0b00100000,
		0b00010000,
		0b00001000,
		0b10000100
	},
	{
		0b00000000,
		0b10000000,
		0b01000000,
		0b00100000,
		0b00010000,
		0b00001000,
		0b10000100,
		0b01000010
	},
	{
		
		0b10000000,
		0b01000000,
		0b00100000,
		0b00010000,
		0b00001000,
		0b10000100,
		0b01000010,
		0b00100001
	},
	{
		
		0b01000000,
		0b00100000,
		0b00010000,
		0b00001000,
		0b10000100,
		0b01000010,
		0b00100001,
		0b00010000
	},
	{
		
		0b00100000,
		0b00010000,
		0b00001000,
		0b10000100,
		0b01000010,
		0b00100001,
		0b00010000,
		0b00001000
	},	
	{

		0b00010000,
		0b00001000,
		0b10000100,
		0b01000010,
		0b00100001,
		0b00010000,
		0b00001000,
		0b10000100
	},
	{

		0b00001000,
		0b10000100,
		0b01000010,
		0b00100001,
		0b00010000,
		0b00001000,
		0b10000100,
		0b01000010
	},
	{
		0b10000100,
		0b01000010,
		0b00100001,
		0b00010000,
		0b00001000,
		0b10000100,
		0b01000010,
		0b00100001

	},
	{

		0b01000010,
		0b00100001,
		0b00010000,
		0b00001000,
		0b10000100,
		0b01000010,
		0b00100001,
		0b00010000
	},
	{

		0b00100001,
		0b00010000,
		0b00001000,
		0b10000100,
		0b01000010,
		0b00100001,
		0b00010000,
		0b00001000
	},	
	{
		
		0b00010000,
		0b00001000,
		0b10000100,
		0b01000010,
		0b00100001,
		0b00010000,
		0b00001000,
		0b10000100
	},	
	{
		
		0b00001000,
		0b10000100,
		0b01000010,
		0b00100001,
		0b00010000,
		0b00001000,
		0b10000100,
		0b01000010
	},	
	{
		
		0b10000100,
		0b01000010,
		0b00100001,
		0b00010000,
		0b00001000,
		0b10000100,
		0b01000010,
		0b00100001
	},	
	{
		0b01000010,
		0b00100001,
		0b00010000,
		0b00001000,
		0b00000100,
		0b10000010,
		0b01000001,
		0b00100000
	},
	{
		0b00100001,
		0b00010000,
		0b00001000,
		0b00000100,
		0b10000010,
		0b01000001,
		0b00100000,
		0b00010000
	},	
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000
	}	
};



static uint8_t _frames[14][8] = {
	{
		0b11111111,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000
	},
	{
		0b00000000,
		0b11111111,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000
	},
	{
		
		0b00000000,
		0b00000000,
		0b11111111,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000
	},
	{
		
		0b00000000,
		0b00000000,
		0b00000000,
		0b11111111,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000
	},
	{
		
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11111111,
		0b00000000,
		0b00000000,
		0b00000000
	},
	{

		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11111111,
		0b00000000,
		0b00000000
	},
	{

		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11111111,
		0b00000000
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11111111

	},
	{

		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11111111,
		0b00000000
	},
	{

		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11111111,
		0b00000000,
		0b00000000
	},
	{
		
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11111111,
		0b00000000,
		0b00000000,
		0b00000000
	},
	{
		
		0b00000000,
		0b00000000,
		0b00000000,
		0b11111111,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000
	},
	{
		
		0b00000000,
		0b00000000,
		0b11111111,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000
	},
	{
		0b00000000,
		0b11111111,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000
	}
};
	//0b10000000,
	//0b10000000,
	//0b01000000,
	//0b01000000,
	//0b00100000,
	//0b00100000,
	//0b00010000,
	//0b00010000
	//};
	

static uint8_t _frames3[16][8] = {
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00011000,
		0b00011000,
		0b00000000,
		0b00000000,
		0b00000000
	},
	{
		0b00000000,
		0b00000000,
		0b00011000,
		0b00100100,
		0b00100100,
		0b00011000,
		0b00000000,
		0b00000000
	},	
	{
		0b00000000,
		0b00011000,
		0b00100100,
		0b01000010,
		0b01000010,
		0b00100100,
		0b00011000,
		0b00000000
	},	
	{
		0b00011000,
		0b00100100,
		0b01000010,
		0b10000001,
		0b10000001,
		0b01000010,
		0b00100100,
		0b00011000
	},
	{
		0b00000000,
		0b00011000,
		0b00100100,
		0b01000010,
		0b01000010,
		0b00100100,
		0b00011000,
		0b00000000
	},	
	{
		0b00000000,
		0b00000000,
		0b00011000,
		0b00100100,
		0b00100100,
		0b00011000,
		0b00000000,
		0b00000000
	},	
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00011000,
		0b00011000,
		0b00000000,
		0b00000000,
		0b00000000
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000
	}
};

uint8_t frameSize = 6;

int main(void)
{
	uint8_t yShift;
	uint8_t y;
	uint8_t frame;
	uint16_t frameLarge;
	
	PORTA.DIRSET = PIN0_bm | PIN1_bm | PIN2_bm | PIN3_bm | PIN4_bm | PIN5_bm | PIN6_bm | PIN7_bm;
	PORTD.DIRSET = PIN0_bm | PIN1_bm | PIN2_bm | PIN3_bm | PIN4_bm | PIN5_bm | PIN6_bm | PIN7_bm;

	
    /* Replace with your application code */
    while (1) 
    {
		
		for (frameLarge = 0; frameLarge < frameSize * 5; frameLarge++)
		{
			//_delay_ms(100);
		frame = frameLarge / 5;
			for (y = 0; y < DIS_HEIGHT; y++)
			{
				yShift = ~(0b00000001 << y);
				
				_delay_us(DELAY);
				PORTD.OUT = yShift;
				PORTA.OUT = 0b00000001 & _frames3[frame][y];
				_delay_us(DELAY);
				PORTD.OUT = yShift;
				PORTA.OUT = 0b00000010 & _frames3[frame][y];
				_delay_us(DELAY);
				PORTD.OUT = yShift;
				PORTA.OUT = 0b00000100 & _frames3[frame][y];
				_delay_us(DELAY);
				PORTD.OUT = yShift;
				PORTA.OUT = 0b00001000 & _frames3[frame][y];
				_delay_us(DELAY);
				PORTD.OUT = yShift;
				PORTA.OUT = 0b00010000 & _frames3[frame][y];
				_delay_us(DELAY);
				PORTD.OUT = yShift;
				PORTA.OUT = 0b00100000 & _frames3[frame][y];
				_delay_us(DELAY);
				PORTD.OUT = yShift;
				PORTA.OUT = 0b01000000 & _frames3[frame][y];
				_delay_us(DELAY);
				PORTD.OUT = yShift;
				PORTA.OUT = 0b10000000 & _frames3[frame][y];
				
			}
		}
		
		//_delay_ms(DELAY);
		//PORTA.OUT = 0b00000001;
		//PORTD.OUT = 0b11111110;
		//
		//_delay_ms(DELAY);
		//PORTA.OUT = 0b00000010;
		//PORTD.OUT = 0b11111101;
				//
		//_delay_ms(DELAY);
		//PORTA.OUT = 0b00000100;
		//PORTD.OUT = 0b11111011;
		//
		//_delay_ms(DELAY);
		//PORTA.OUT = 0b00001000;
		//PORTD.OUT = 0b11110111;
		//
		//_delay_ms(DELAY);
		//PORTA.OUT = 0b00010000;
		//PORTD.OUT = 0b11101111;		
		//
		//_delay_ms(DELAY);
		//PORTA.OUT = 0b00100000;
		//PORTD.OUT = 0b11011111;
		//
		//_delay_ms(DELAY);
		//PORTA.OUT = 0b01000000;
		//PORTD.OUT = 0b10111111;
		//
		//_delay_ms(DELAY);
		//PORTA.OUT = 0b10000000;
		//PORTD.OUT = 0b01111111;
		//
//
//
//
//
		//_delay_ms(DELAY);
		//PORTA.OUT = 0b00000001;
		//PORTD.OUT = 0b01111111;
		//
		//_delay_ms(DELAY);
		//PORTA.OUT = 0b00000010;
		//PORTD.OUT = 0b10111111;
		//
		//_delay_ms(DELAY);
		//PORTA.OUT = 0b00000100;
		//PORTD.OUT = 0b11011111;
		//
		//_delay_ms(DELAY);
		//PORTA.OUT = 0b00001000;
		//PORTD.OUT = 0b11101111;
		//
		//_delay_ms(DELAY);
		//PORTA.OUT = 0b00010000;
		//PORTD.OUT = 0b11110111;
		//
		//_delay_ms(DELAY);
		//PORTA.OUT = 0b00100000;
		//PORTD.OUT = 0b11111011;
		//
		//_delay_ms(DELAY);
		//PORTA.OUT = 0b01000000;
		//PORTD.OUT = 0b11111101;
		//
		//_delay_ms(DELAY);
		//PORTA.OUT = 0b10000000;
		//PORTD.OUT = 0b11111110;													
		
    }
}

